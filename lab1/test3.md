# 练习3：分析bootloader进入保护模式的过程。（要求在报告中写出分析）

    BIOS将通过读取硬盘主引导扇区到内存，并转跳到对应内存中的位置执行bootloader。请分析bootloader是如何完成从实模式进入保护模式的。

第一步：清理环境，包括将flag置0和将段寄存器置0。
<pre><code>
        .code16

	    cli

	    cld

	    xorw %ax, %ax

	    movw %ax, %ds

	    movw %ax, %es

	    movw %ax, %ss
        
</pre></code>
第二步：开启A20，因为A20的初始值是0，地址线控制是被屏蔽的，而在保护模式下 A20 地址线控制是要打开的，所以需要通过将键盘控制器上的A20线置于高电位，使得全部32条地址线可用。
第三步：初始化GDT表，段寄存器只有16bit，保护模式需要64bit的段描述符，GDP存储此映射。
第四步: 进入保护模式：通过将cr0寄存器PE位置1便开启了保护模式。
第五步：通过长跳转更新cs，设置段寄存器，建立堆栈，转到保护模式完成，进入boot主方法。
